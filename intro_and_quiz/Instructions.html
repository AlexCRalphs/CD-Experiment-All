<style>
html {
  scroll-behavior: smooth;
}
table, th, td {
  border: none;
  border-collapse: collapse;
  text-align: center;
  margin: auto;
}
th, td {
  padding: 0;
  font-weight: inherit;
}
.payoff {
  border: 1px solid black;
  padding: 0;
    font-weight: bold;
}


/* The container */
.rectangle {
  display: block;
  position: relative;
  padding: 0;
  margin: 1px 2px 1px 2px;
  width: 100px;
  height: 90px;
  line-height: 90px;
  cursor: pointer;
  font-size: 20px;
  background-color: rgba(128, 191, 255, 0.2);
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  color: blue;
  font-weight: bold;
  border-radius: 2px;
}

.op_rectangle {
  display: block;
  position: relative;
  padding: 0;
  margin: 2px 1px 2px 1px;
  width: 160px;
  height: 60px;
  line-height: 60px;
  cursor: pointer;
  font-size: 20px;
  background-color: rgba(0, 0, 0, 0.1);
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  color: black;
  font-weight: bold;
  border-radius: 2px;
}

/* Hide the browser's default radio button */
.rectangle input {
  position: absolute;
  opacity: 0;
  cursor: pointer;
}

.op_rectangle input {
  position: absolute;
  opacity: 0;
  cursor: pointer;
}

/* Create a custom radio button */
.checkmark {
  position: absolute;
  padding: 0;
  top: 0;
  left: 0;
  height: 90px;
  width: 100px;
  background-color: rgba(128, 191, 255, 0.2);
  opacity: 0;
}

.op_checkmark {
  position: absolute;
  padding: 0;
  top: 0;
  left: 0;
  height: 60px;
  width: 160px;
  background-color: rgba(128, 191, 255, 0.2);
  opacity: 0;
}

/* On mouse-over, add a light background color */
.rectangle:hover input ~ .checkmark {
  background-color: rgba(128, 191, 255, 0.5);
  opacity: 0.5;
}

.op_rectangle:hover input ~ .op_checkmark {
  background-color: rgba(0, 0, 0, 0.1);
  opacity: 0.5;
}

/* When the radio button is checked, add a dark background */
.rectangle input:checked ~ .checkmark {
  background-color: rgba(128, 191, 255, 0.5);
  opacity: 1;
}

.op_rectangle input:checked ~ .op_checkmark {
  background-color: rgba(0, 0, 0, 0.15);
  opacity: 1;
}

/* Create the indicator (the dot/circle - hidden when not checked) */
.checkmark:after {
  content: "";
  position: absolute;
  display: none;
}

.op_checkmark:after {
  content: "";
  position: absolute;
  display: none;
}

/* Show the indicator (dot/circle) when checked */
.rectangle input:checked ~ .checkmark:after {
  display: block;
}

.op_rectangle input:checked ~ .op_checkmark:after {
  display: block;
}

/* Style the indicator (dot/circle) */
.rectangle .checkmark:after {
 	top: 9px;
	left: 9px;
	width: 0;
	height: 0;
	border-radius: 50%;
	background: rgba(128, 191, 255, 0);
}

.op_rectangle .op_checkmark:after {
 	top: 9px;
	left: 9px;
	width: 0;
	height: 0;
	border-radius: 50%;
	background: rgba(0, 0, 0, 0);
}
</style>
<h2 class="otree-title page--header">Instructions</h2>

<div>
    <p>
    The experiment consists of {{ number_of_games }} decision rounds.  In each round, you will be shown a payoff table
    like the one below.  You will always be designated as the 'row' player. This means that your possible choices are
    'Top' and 'Bottom'.  In each cell, there contains 2 numbers.  The entries in the payoff tables represent payoffs
    that you, and your opponent can earn in each round.  The entry to the left represents your possible payoff.
    The entry to the right represents your opponent's possible payoff.
    </p>

    <p>
    The payoffs that you earn depend on the decision that you make, and the decision of your opponent.  For example,
    if you choose 'Bottom', and your opponent chooses 'Left', your payoff will be 3, and your opponent's payoff will
    be 7.
    </p>
</div><br>
<div>
    <table style="font-size: 20px">
        <tr style="height: 60px">  <!-- Top Row -->
            <th style="width: 100px"></th>  <!-- Top left Corner -->
            <th style="width: 160px; font-weight: bold">Left</th>  <!-- Left Choice -->
            <th style="width: 160px; font-weight: bold">Right</th>  <!-- Right Choice-->
        </tr>
        <tr style="height: 90px">  <!-- Middle Row -->
            <td style="width: 100px">
                <span style="color: blue; font-weight: bold">Top</span>
            </td>  <!-- Top Choice -->
            <th class="payoff"><span style="color: blue">1</span>, 5</th>  <!-- Top-Left Payoffs -->
            <th class="payoff"><span style="color: blue">2</span>, 6</th>  <!-- Top-Right Payoffs -->
        </tr>
        <tr style="height: 90px">  <!-- Bottom Row -->
            <td style="width: 100px">
                <span style="color: blue; font-weight: bold">Bottom</span>
            </td>  <!-- Bottom Choice -->
            <th class="payoff"><span style="color: blue">3</span>, 7</th>  <!-- Bottom-Left Payoffs -->
            <th class="payoff"><span style="color: blue">4</span>, 8</th>  <!-- Bottom-Right Payoffs -->
        </tr>
    </table>
</div>
<br>
<div>
    <p>
        Below is an interactive payoff matrix, the same as what you will see in the decision rounds.
        Make sure to familiarise yourself with the buttons.  You should notice the cells corresponding to your choice
        will be highlighted once you select either 'Top' or 'Bottom'.  You can change your decision as often as you like,
        and your decision will only be final once you click on the 'Next' button.
    </p>
    <p>
        Try out the interactive payoff matrix below by making a choice.
    </p>
</div>
<br>
<div id="decision_table_instruct">  <!-- table for payoff matrix -->
    <table style="font-size: 20px">
        <tr style="height: 60px">  <!-- Top Row -->
            <th style="width: 100px; height: 60px; padding: 0"></th>  <!-- Top left Corner -->
            <td style="width: 160px; height: 60px; padding: 0"> <!-- Left Choice -->
                <label class="op_rectangle">Left
                    <input name="op_choice" type="radio" id="left_instruct">
                    <span class="op_checkmark">Left</span>
                </label>
            </td>
            <td style="width: 160px; height: 60px; padding: 0"> <!-- Right Choice -->
                <label class="op_rectangle">Right
                    <input name="op_choice" type="radio" id="right_instruct">
                    <span class="op_checkmark">Right</span>
                </label>
            </td>
        </tr>
        <tr>  <!-- Middle Row -->
            <td style="width: 100px; padding: 0">
                <label class="rectangle">Top
                    <input name="choice" type="radio" id="top_instruct">
                    <span class="checkmark">Top</span>
                </label>
            </td>  <!-- Top Choice -->
            <th class="payoff top left instructions"><span style="color: blue">1</span>, 5</th>  <!-- Top-Left Payoffs -->
            <th class="payoff top right instructions"><span style="color: blue">2</span>, 6</th>  <!-- Top-Right Payoffs -->
        </tr>
        <tr>  <!-- Bottom Row -->
            <td style="width: 100px; padding: 0">
                <label class="rectangle">Bottom
                    <input name="choice" type="radio" id="bottom_instruct">
                    <span class="checkmark">Bottom</span>
                </label>
            </td>  <!-- Bottom Choice -->
            <th class="payoff bottom left instructions"><span style="color: blue">3</span>, 7</th>  <!-- Bottom-Left Payoffs -->
            <th class="payoff bottom right instructions"><span style="color: blue">4</span>, 8</th>  <!-- Bottom-Right Payoffs -->
        </tr>
    </table>
</div>
<br>
<div>
    <p>
        You will be required to spend at least {{time}} seconds on the choice screen each round.
        You may spend more time on each screen if you wish.
    </p>
</div>

<script>
function highlight_rows_and_columns_instructions() {
    let top_button = document.getElementById("top_instruct");
    let bottom_button = document.getElementById("bottom_instruct");
    let left = document.querySelectorAll(".left.instructions");
    let right = document.querySelectorAll(".right.instructions");
    let left_button = document.getElementById("left_instruct");
    let right_button = document.getElementById("right_instruct");


    if (left_button.checked === true) {
        if (top_button.checked === true) {
            left[0].style.backgroundColor = "rgba(128, 191, 255, 1)";
        } else {
            left[0].style.backgroundColor = "rgba(0, 0, 0, 0.2)";
        }
        if (bottom_button.checked === true) {
            left[1].style.backgroundColor = "rgba(128, 191, 255, 1)";
        } else {
            left[1].style.backgroundColor = "rgba(0, 0, 0, 0.2)";
        }
    } else {
        if (top_button.checked === true) {
            left[0].style.backgroundColor = "rgba(128, 191, 255, 0.5)";
        } else {
            left[0].style.backgroundColor = "#ffffff";
        }
        if (bottom_button.checked === true) {
            left[1].style.backgroundColor = "rgba(128, 191, 255, 0.5)";
        } else {
            left[1].style.backgroundColor = "#ffffff";
        }
    }
    if (right_button.checked === true) {
        if (top_button.checked === true) {
            right[0].style.backgroundColor = "rgba(128, 191, 255, 1)";
        } else {
            right[0].style.backgroundColor = "rgba(0, 0, 0, 0.2)";
        }
        if (bottom_button.checked === true) {
            right[1].style.backgroundColor = "rgba(128, 191, 255, 1)";
        } else {
            right[1].style.backgroundColor = "rgba(0, 0, 0, 0.2)";
        }
    } else {
        if (top_button.checked === true) {
            right[0].style.backgroundColor = "rgba(128, 191, 255, 0.5)";
        } else {
            right[0].style.backgroundColor = "#ffffff";
        }
        if (bottom_button.checked === true) {
            right[1].style.backgroundColor = "rgba(128, 191, 255, 0.5)";
        } else {
            right[1].style.backgroundColor = "#ffffff";
        }
    }
}

let top_instructions = document.getElementById("top_instruct");
let bottom_instructions = document.getElementById("bottom_instruct");
let left_instructions = document.getElementById("left_instruct");
let right_instructions = document.getElementById("right_instruct");
top_instructions.addEventListener("click", highlight_rows_and_columns_instructions, false);
bottom_instructions.addEventListener("click", highlight_rows_and_columns_instructions, false);
left_instructions.addEventListener("click", highlight_rows_and_columns_instructions, false);
right_instructions.addEventListener("click", highlight_rows_and_columns_instructions, false);
</script>